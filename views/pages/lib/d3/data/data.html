<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>fe-note</title>
<script type="text/javascript" src="/assets/lib/d3/3.0.0/d3.js"></script>
</head>
<body>
<div>
  <p>
    <span></span>
  </p>
</div>
<div>
  <p>
    <span></span>
  </p>
  <p>
    <span></span>
  </p>
  <p>
    <span></span>
  </p>
</div>
<script type="text/javascript">
(function () {
  // 1个group，这个group下包含页面上所有div元素
  // 这个group的parentNode是document.documentElement
  var div = d3.selectAll('div');
  console.log(div[0].parentNode === document.documentElement)

  // 1个group，这个group下只包含d3查找到的第1个div元素
  // div = d3.select('div');

  var data = [
    [1],
    [2, 3, 4]
  ];
  // 给每个group设置data
  // 设置后，每个group的data是一致的

  // 第1个group下第1个div元素，对应的data被设置为data[0]
  // 第1个group下第2个div元素，对应的data被设置为data[1]
  div.data(data);

  // 根据div分group，现在有2个div，所以分成2个group
  // 第1个group，parentNode是第1个div，包含1个span元素
  // 第2个group，parentNode是第2个div，包含3个span元素
  var span = div.selectAll('span');

  // 给每个group设置data
  // 根据返回值确定group的data
  span.data(function (parentData, i) {
    // parentData是这个group的parentNode的data
    // i是这个group在整个group列表中的下标
    return parentData;
  });

  span.text(function (num) {
    return num;
  })
})();
</script>
</body>
</html>