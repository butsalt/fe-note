<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>fe-note</title>
<script type="text/javascript" src="/assets/lib/d3/3.5.17/d3.js"></script>
<style type="text/css">
  .bar {
    background: steelblue;
    height: 30px;
    width: 0;
  }
</style>
</head>
<body>
<div class="bar" id="J-bar"></div>
<script type="text/javascript">
  (function () {
    var $bar = d3.select('#J-bar')

    // 就算没有属性变换,2000毫秒后end还是被触发
    function animate() {
      console.log('animte!');
      $bar
        .transition(2000)
        .each('end', animate);
    }
    animate();
  })();
</script>
</body>
</html>